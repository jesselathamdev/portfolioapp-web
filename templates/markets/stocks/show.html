{% extends "base_app_two_columns.html" %}

{% load humanize %}

{% block browser_title %}Stocks{% endblock browser_title %}

{% block breadcrumbs %}<a href="/">Dashboard</a> &rarr; <a href="{% url 'markets_stocks_index' %}">Stocks</a> &rarr; {{ stock.name }} ({{ stock.symbol }}:{{ stock.market.acr }}){% endblock breadcrumbs %}

{% block page_title %}<i class="icon-book"></i> Stocks{% endblock page_title %}

{% block content %}

  <div class="stock-header clearfix">
    <div style="float: left;">
      <span class="stock-name">{{ stock.name }}</span> <span class="stock-symbol">({{ stock.symbol }}:{{ stock.market.acr }})</span> <span class="stock-current-price">$15.43</span> <span class="stock-currency">CAD</span> <span class="stock-change indicator-loss"><span class="stock-change-price">-$0.1200</span> <span class="stock-change-percent">(-0.77%)</span></span>
    </div>
    <div style="float: right;">
      <a href="{% url 'markets_stocks_historical_prices_index' stock.id %}">View Historical Prices</a>
    </div>
  </div>

  <div id="stock-chart"></div>

{% endblock content %}

{% block sidebar %}

  <div class="widget widget-simple">
    <div class="widget-header">
      <h3>Key Statistics</h3>
    </div>
    <div class="widget-body">
      <ul>
        <li>Item 1: 10</li>
        <li>Item 2: 20</li>
        <li>Item 3: 30</li>
        <li>Item 4: 40</li>
      </ul>
    </div>
  </div>

{% endblock sidebar %}

{% block script %}

  <script type="text/javascript" src="{{ STATIC_URL }}js/highstock/highstock.js"></script>
  <script type="text/javascript">

      $(document).ready(function() {

          $('#stock-chart').highcharts('StockChart', {
              chart: {

              },
              credits: {
                  enabled: false
              },
              scrollBar: {
                  enabled: false
              },
              navigator: {
                  enabled: false
              },
              rangeSelector: {
                  selected: 4
              },
{#              plotOptions: {#}
{#                  series: {#}
{#                      pointStart: Date.UTC(2012, 4, 1),#}
{#                      pointInterval: 86400000,#}
{#                      pointRange: 432000000#}
{#                  }#}
{#              },#}
              xAxis: {
                  ordinal: false
              },
              series: [{
                  name: '{{ stock.symbol }}:{{ stock.market.acr }}',
                  data: {{ stock_chart }},
                  tooltip: {
                      valueDecimals: 2
                  }
              }]
          });

      });

  </script>

{% endblock script %}